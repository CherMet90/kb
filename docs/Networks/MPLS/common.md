MPLS работает слудующим образом:  
MPLS-роутеры автоматически присваивают метки каждой подсети, о которой им известно  
![Назначение меток подсетям](../../images/mpls_label_assign.PNG)
<br>
Затем каждый роутер анонсит свои локальные метки соседям с помощью протокола LDP (udp/tcp 646).  
Таким образом формируется LIB(Label Information Base)  
![Рспространение меток по домену](../../images/ldp.PNG)
<br>
На основе LIB и таблицы маршрутизации формируются FIB и LFIB  
![Control and Data planes](../../images/mpls_tables.PNG)
<br>
LFIB содержит информацию какую метку на какую менять при форвардинге и какому роутеру отправлять дальше  
![LSP](../../images/lsp.PNG)
<br>
